# vim: sw=4:ts=4:tw=78
# $FreeBSD$

build = opts.llvm.targets;

if not (build.aarch64 or build.arm or build.bpf or build.mips
	or build.powerpc or build.riscv or build.sparc or build.x86)
{
	error('No LLVM targets specified')
}
else [];


# Specify where generated files will be built (and included from)
target_dir = llvmlibdir :: 'Target';

tblgen = import('tblgen.fab',
	llvm_include=llvmroot::'include', output_dir=target_dir);

sources =
	{
		subdir = target_dir;

		files(
			Target.cpp TargetIntrinsicInfo.cpp TargetLoweringObjectFile.cpp
			TargetMachine.cpp TargetMachineC.cpp
		)
	}
	;

currently_ignored_sources =
	+ (if build.aarch64 import('AArch64.fab').sources else [])
	+ (if build.arm import('ARM.fab').sources else [])
	+ (if build.bpf import('BPF.fab').sources else [])
	+ (if build.mips import('Mips.fab').sources else [])
	+ (if build.powerpc import('PowerPC.fab').sources else [])
	+ (if build.riscv import('RISCV.fab').sources else [])
	+ (if build.sparc import('Sparc.fab').sources else [])
	+ (if build.x86 import('X86.fab').sources else [])
	;
