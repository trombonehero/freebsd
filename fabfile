#
# $FreeBSD$
#
# Build description for FreeBSD, written in the Fabrique language
# (https://fabriquer.github.io).
#

#
# Detect the host platform using the `platform` plugin but
# hard-code the target platform... we're building FreeBSD.
#
host = import('platform');
target = record
{
	architecture = args.arch ? host.architecture;
	osname = 'FreeBSD';

	bsd = true;
	darwin = false;
	linux = false;
	posix = true;
	windows = false;
};

# We may not always want to use the tmproot approach, but let's try to
# change as few things as possible right now.
tmproot = import('tmproot.fab', target=target);
sysdir = file('sys');

includes =
	file('include')
	::
	(sysdir :: 'sys')
	::
	((sysdir :: target.architecture) :: 'include')
	::
	((file('lib') :: 'msun') :: 'src')
	::
	[tmproot.includedir]
	;

options = import('options.fab');

toolchain = import('share/fab/toolchain',
	includes = includes,
	pretty=args.pretty ? false
);

libraries = import('lib');
